# CONTROL_IMPLEMENTACION_VUE - Aseo Contratado

## Informacion del Modulo
- **Modulo:** aseo_contratado
- **Base de Datos:** aseo_contratado
- **Esquema:** public
- **Estado:** EN PROGRESO
- **Fecha Inicio:** 2025-12-07

---

## Estado General
- **COMPLETADOS:** 5/66 componentes
- **Progreso:** 7.6%
- **SPs Implementados:** 20+
- **Lineas de Codigo:** 3,500+

---

## Resumen de Componentes

### Completados (5)

| # | Archivo | Tipo | Estado | Fecha |
|---|---------|------|--------|-------|
| 1 | ABC_Cves_Operacion.vue | Catalogo | [COMPLETADO] | 2025-12-07 |
| 2 | ABC_Empresas.vue | Catalogo | [COMPLETADO] | 2025-12-07 |
| 3 | ABC_Gastos.vue | Configuracion | [COMPLETADO] | 2025-12-07 |
| 4 | ABC_Recargos.vue | Catalogo | [COMPLETADO] | 2025-12-07 |
| 5 | ABC_Recaudadoras.vue | Catalogo | [COMPLETADO] | 2025-12-07 |

### Pendientes (61)

| # | Archivo | Tipo | Estado |
|---|---------|------|--------|
| 6 | ABC_Tipos_Aseo.vue | Catalogo | [PENDIENTE] |
| 7 | ABC_Tipos_Emp.vue | Catalogo | [PENDIENTE] |
| 8 | ABC_Und_Recolec.vue | Catalogo | [PENDIENTE] |
| 9 | ABC_Zonas.vue | Catalogo | [PENDIENTE] |
| 10 | ActCont_CR.vue | Modulo | [PENDIENTE] |
| 11 | Adeudos.vue | Modulo | [PENDIENTE] |
| 12 | AdeudosCN_Cond.vue | Modulo | [PENDIENTE] |
| 13 | AdeudosEst.vue | Modulo | [PENDIENTE] |
| 14 | AdeudosExe_Del.vue | Modulo | [PENDIENTE] |
| 15 | AdeudosMult_Ins.vue | Modulo | [PENDIENTE] |
| 16 | Adeudos_Carga.vue | Modulo | [PENDIENTE] |
| 17 | Adeudos_EdoCta.vue | Reporte | [PENDIENTE] |
| 18 | Adeudos_Ins.vue | Modulo | [PENDIENTE] |
| 19 | Adeudos_Nvo.vue | Modulo | [PENDIENTE] |
| 20 | Adeudos_OpcMult.vue | Modulo | [PENDIENTE] |
| 21 | Adeudos_Pag.vue | Modulo | [PENDIENTE] |
| 22 | Adeudos_PagMult.vue | Modulo | [PENDIENTE] |
| 23 | Adeudos_PagUpdPer.vue | Modulo | [PENDIENTE] |
| 24 | Adeudos_UpdExed.vue | Modulo | [PENDIENTE] |
| 25 | Adeudos_Venc.vue | Modulo | [PENDIENTE] |
| 26 | AplicaMultas.vue | Modulo | [PENDIENTE] |
| 27 | Cons_Cont.vue | Consulta | [PENDIENTE] |
| 28 | Cons_ContAsc.vue | Consulta | [PENDIENTE] |
| 29 | Contratos.vue | Modulo | [PENDIENTE] |
| 30 | ContratosEst.vue | Modulo | [PENDIENTE] |
| 31 | Contratos_Adeudos.vue | Modulo | [PENDIENTE] |
| 32 | Contratos_Alta.vue | Modulo | [PENDIENTE] |
| 33 | Contratos_Baja.vue | Modulo | [PENDIENTE] |
| 34 | Contratos_Cancela.vue | Modulo | [PENDIENTE] |
| 35 | Contratos_Cons_Admin.vue | Consulta | [PENDIENTE] |
| 36 | Contratos_Cons_Dom.vue | Consulta | [PENDIENTE] |
| 37 | Contratos_Consulta.vue | Consulta | [PENDIENTE] |
| 38 | Contratos_EstGral.vue | Reporte | [PENDIENTE] |
| 39 | Contratos_Mod.vue | Modulo | [PENDIENTE] |
| 40 | Contratos_Upd_Periodo.vue | Modulo | [PENDIENTE] |
| 41 | Contratos_Upd_Und.vue | Modulo | [PENDIENTE] |
| 42 | Ctrol_Imp_Cat.vue | Modulo | [PENDIENTE] |
| 43 | DatosConvenio.vue | Modulo | [PENDIENTE] |
| 44 | DescuentosPago.vue | Modulo | [PENDIENTE] |
| 45 | EjerciciosGestion.vue | Catalogo | [PENDIENTE] |
| 46 | Empresas_Contratos.vue | Consulta | [PENDIENTE] |
| 47 | EstGral2.vue | Reporte | [PENDIENTE] |
| 48 | Ins_b.vue | Modulo | [PENDIENTE] |
| 49 | Pagos_Con_FPgo.vue | Modulo | [PENDIENTE] |
| 50 | Pagos_Cons_Cont.vue | Consulta | [PENDIENTE] |
| 51 | Pagos_Cons_ContAsc.vue | Consulta | [PENDIENTE] |
| 52 | RelacionContratos.vue | Reporte | [PENDIENTE] |
| 53 | Rep_AdeudCond.vue | Reporte | [PENDIENTE] |
| 54 | Rep_PadronContratos.vue | Reporte | [PENDIENTE] |
| 55 | Rep_Recaudadoras.vue | Reporte | [PENDIENTE] |
| 56 | Rep_Tipos_Aseo.vue | Reporte | [PENDIENTE] |
| 57 | Rep_Zonas.vue | Reporte | [PENDIENTE] |
| 58 | Rpt_Adeudos.vue | Reporte | [PENDIENTE] |
| 59 | Rpt_Contratos.vue | Reporte | [PENDIENTE] |
| 60 | Rpt_Empresas.vue | Reporte | [PENDIENTE] |
| 61 | Rpt_EstadoCuenta.vue | Reporte | [PENDIENTE] |
| 62 | Rpt_Pagos.vue | Reporte | [PENDIENTE] |
| 63 | Upd_01.vue | Modulo | [PENDIENTE] |
| 64 | Upd_IniObl.vue | Modulo | [PENDIENTE] |
| 65 | Upd_UndC.vue | Modulo | [PENDIENTE] |
| 66 | UpdxCont.vue | Modulo | [PENDIENTE] |

---

## Leyenda
- [COMPLETADO] - Componente 100% funcional y validado
- [EN PROGRESO] - Componente en desarrollo
- [PENDIENTE] - Componente sin iniciar

---

## Resumen Tecnico

### SPs por Componente Completado:

**ABC_Cves_Operacion.vue:**
- sp_cves_operacion_list
- sp_cves_operacion_insert
- sp_cves_operacion_update
- sp_cves_operacion_delete

**ABC_Empresas.vue:**
- sp_empresas_list
- sp_empresas_create
- sp_empresas_update
- sp_empresas_delete
- sp_tipos_emp_list (catalogo)

**ABC_Gastos.vue:**
- sp_gastos_list
- sp_gastos_insert
- sp_gastos_delete_all

**ABC_Recargos.vue:**
- sp_recargos_list
- sp_recargos_create
- sp_recargos_update
- sp_recargos_delete

**ABC_Recaudadoras.vue:**
- sp_list_recaudadoras
- sp_get_next_num_recaudadora
- sp_insert_recaudadora
- sp_update_recaudadora
- sp_delete_recaudadora

---

## Reglas de Integracion

- API FrontEnd: `execute(Operacion, BASE_DB, Parametros, '', null, SCHEMA)` usando `useApi` composable
  - BASE_DB: `aseo_contratado`
  - SCHEMA: `public`
  - Operacion: nombre del SP (lowercase)
  - Composables: `useApi`, `useLicenciasErrorHandler`, `useGlobalLoading`

- Patron de operaciones CRUD:
  1. Validacion de campos
  2. SweetAlert2 de confirmacion
  3. showLoading() del composable useGlobalLoading
  4. Ejecutar operacion con execute()
  5. hideLoading()
  6. showToast() con resultado

---

## Criterios UX
- Botones primarios/acciones con clases municipal-theme
- Modal para formularios de creacion/edicion
- SweetAlert2 para confirmaciones de acciones destructivas
- Loading global durante operaciones asincronas
- Toast notifications para resultados
- Paginacion estandar (10 items por defecto)
- Exportacion CSV funcional

---

## Correcciones Aplicadas (2025-12-07)

### ABC_Cves_Operacion.vue
- Corregidos nombres de SP (SP_ASEO_... -> sp_cves_operacion_...)
- Agregado useGlobalLoading
- Patron SweetAlert2 + Loading en CRUD
- Removido TechnicalDocsModal duplicado
- Removido boton ayuda duplicado
- Export CSV funcional

### ABC_Empresas.vue
- Corregidos nombres de SP (SP_ASEO_EMPRESAS_... -> sp_empresas_...)
- Agregado useGlobalLoading
- Patron SweetAlert2 + Loading en CRUD
- Removidos campos inexistentes (telefono, email, direccion, fecha_baja)
- Carga de catalogo tipos de empresa
- Export CSV funcional

### ABC_Gastos.vue
- Reescrito completamente basado en Pascal original
- Formulario de configuracion (no catalogo)
- Campos: sdzmg, porc1_req, porc2_embargo, porc3_secuestro
- Patron correcto de guardar/eliminar configuracion
- Tabla: ta_16_gastos (registro unico)

### ABC_Recargos.vue
- Reescrito completamente basado en SPs reales
- Campos: aso_mes_recargo (DATE), porc_recargo, porc_multa
- Selector de periodo con input type="month"
- Filtro por a√±o funcional
- Export CSV funcional

### ABC_Recaudadoras.vue
- Corregidos nombres de SP
- Removido TechnicalDocsModal duplicado dentro de modal
- Agregado useGlobalLoading
- Patron SweetAlert2 + Loading en CRUD
- Carga automatica siguiente numero disponible
- Export CSV funcional

---

## Tablas Principales

| Tabla | Descripcion |
|-------|-------------|
| ta_16_operacion | Claves de operacion |
| ta_16_empresas | Empresas prestadoras |
| ta_16_gastos | Configuracion de gastos (1 registro) |
| ta_16_recargos | Recargos por periodo |
| ta_16_recaudadoras | Empresas recaudadoras |
| ta_16_tipos_emp | Tipos de empresa |
| ta_16_tipos_aseo | Tipos de aseo |
| ta_16_zonas | Zonas de servicio |
| ta_16_contratos | Contratos de aseo |
| ta_16_adeudos | Adeudos de contratos |
| ta_16_pagos | Pagos registrados |

---

**Ultima actualizacion:** 2025-12-07
**Estado:** EN PROGRESO - 5/66 componentes completados

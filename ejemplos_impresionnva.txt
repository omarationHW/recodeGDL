=== EJEMPLOS PARA PROBAR ImpresionNva.vue ===

El componente y stored procedure han sido actualizados para mostrar informaci√≥n completa de la impresi√≥n.

IMPORTANTE:
- Ahora muestra todos los detalles de la impresi√≥n generada
- Informaci√≥n organizada en secciones visuales
- Monto y estado destacados para mejor visibilidad
- Validaciones de entrada implementadas

--- EJEMPLO 1: Clave de cuenta v√°lida ---

Clave de Cuenta: 000001

Resultado esperado:
‚úì Status: success
‚úì Mensaje: "Impresi√≥n generada exitosamente"

INFORMACI√ìN MOSTRADA:

üìÑ Informaci√≥n de la Impresi√≥n:
- Folio: IMP-0037170
- Clave Cuenta: 000001
- Fecha de Generaci√≥n: 18 de diciembre de 2025
- Tipo de Documento: Documento de Requerimiento
- N√∫mero de P√°ginas: 2
- Formato: PDF
- Estado: Generado
- Periodo: Periodo actual

üë§ Informaci√≥n del Contribuyente:
- Contribuyente: CONTRIBUYENTE
- Monto Total: $30,254.75

‚ÑπÔ∏è Observaciones:
Impresi√≥n generada para la cuenta 000001 el 2025-12-18


--- EJEMPLO 2: B√∫squeda por folio ---

Clave de Cuenta: 0037170

Resultado esperado:
‚úì B√∫squeda exitosa con datos del folio
‚úì Monto de $30,254.75
‚úì 2 p√°ginas de documento
‚úì Toda la informaci√≥n organizada visualmente


--- EJEMPLO 3: Otra cuenta v√°lida ---

Clave de Cuenta: 000002

Resultado esperado:
‚úì B√∫squeda exitosa con datos del requerimiento
‚úì Folio y monto correspondientes
‚úì Toda la informaci√≥n organizada visualmente


--- EJEMPLO 4: Cuenta inexistente ---

Clave de Cuenta: 999999999999

Resultado esperado:
‚úó Status: error
‚úó Mensaje: "No se encontr√≥ informaci√≥n para la clave de cuenta proporcionada"
‚úó Se muestra en rojo (alert-danger)


--- EJEMPLO 5: Campo vac√≠o (validaci√≥n) ---

Clave de Cuenta: (dejar vac√≠o)

Resultado esperado:
‚úó Bot√≥n deshabilitado (no se puede hacer clic)
‚úó Validaci√≥n en frontend impide el env√≠o

Si se env√≠a vac√≠o desde el backend:
‚úó Status: error
‚úó Mensaje: "Debe proporcionar una clave de cuenta"


--- ESTRUCTURA VISUAL DEL RESULTADO ---

Cuando es exitoso:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚úì Impresi√≥n generada exitosamente          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                             ‚îÇ
‚îÇ üìÑ Informaci√≥n de la Impresi√≥n            ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ ‚îÇ Folio         ‚îÇ Clave Cuenta  ‚îÇ          ‚îÇ
‚îÇ ‚îÇ Fecha         ‚îÇ Tipo Documento‚îÇ          ‚îÇ
‚îÇ ‚îÇ P√°ginas       ‚îÇ Formato       ‚îÇ          ‚îÇ
‚îÇ ‚îÇ Estado        ‚îÇ Periodo       ‚îÇ          ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ üë§ Informaci√≥n del Contribuyente           ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ ‚îÇ Contribuyente ‚îÇ Monto Total   ‚îÇ          ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ        $30,254.75                          ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ ‚ÑπÔ∏è Observaciones                           ‚îÇ
‚îÇ (Texto de observaciones con fondo claro)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò


--- MEJORAS VISUALES IMPLEMENTADAS ---

1. **Organizaci√≥n por secciones**
   - Informaci√≥n de la Impresi√≥n (8 campos)
   - Informaci√≥n del Contribuyente
   - Monto Total destacado
   - Observaciones

2. **Grid responsive**
   - Los campos se organizan en columnas
   - Se adapta al tama√±o de la pantalla
   - M√≠nimo 250px por columna

3. **Estados visuales**
   - Badge verde para estado "Generado"
   - Monto formateado en pesos mexicanos
   - Formato PDF indicado claramente

4. **Etiquetas y valores claros**
   - Etiquetas en verde claro (80% opacidad)
   - Valores en negrita y color completo
   - Separaci√≥n vertical clara

5. **Iconos descriptivos**
   - üìÑ file-pdf para informaci√≥n de impresi√≥n
   - üë§ user para contribuyente
   - ‚ÑπÔ∏è info-circle para observaciones
   - ‚úì check-circle para √©xito
   - ‚úó times-circle para error

6. **Loading state**
   - Spinner mientras procesa
   - Texto "Procesando..."
   - Bot√≥n deshabilitado durante carga


--- VALIDACIONES IMPLEMENTADAS ---

Frontend:
1. Bot√≥n deshabilitado si no hay clave de cuenta
2. Campo obligatorio marcado visualmente
3. Texto de ayuda: "Ingrese la clave de cuenta para generar la impresi√≥n"
4. Enter key para enviar formulario

Backend (Stored Procedure):
1. Valida que la clave no est√© vac√≠a
2. Valida que la clave exista en la BD
3. Busca por ctarfc o folreq
4. Retorna mensajes de error descriptivos


--- FORMATO DE FECHAS ---

Las fechas se muestran en formato largo en espa√±ol:
- "18 de diciembre de 2025"
- Autom√°tico seg√∫n el locale del navegador


--- FORMATO DE MONEDA ---

Los montos se formatean como pesos mexicanos:
- $30,254.75
- Con separador de miles
- Dos decimales
- S√≠mbolo de pesos


--- CAMPOS RETORNADOS POR EL SP ---

El stored procedure retorna:
- status: 'success' o 'error'
- mensaje: Descripci√≥n del resultado
- folio_impresion: Folio √∫nico (IMP-XXXXXX)
- fecha_generacion: Fecha actual
- tipo_documento: Tipo de requerimiento
- numero_paginas: Cantidad de p√°ginas (1 o 2)
- clave_cuenta: Cuenta consultada
- contribuyente: Nombre del contribuyente
- monto_total: Importe total
- periodo: Periodo del documento
- estado: Estado de la impresi√≥n (Generado)
- formato: Formato del documento (PDF)
- observaciones: Informaci√≥n adicional


--- L√ìGICA DE NEGOCIO ---

1. **B√∫squeda flexible**:
   - Busca por ctarfc (clave de cuenta)
   - Tambi√©n busca por folreq (folio de requerimiento)
   - Usa ILIKE para b√∫squeda parcial

2. **Generaci√≥n de folio**:
   - Formato: IMP-XXXXXXX
   - Usa el folreq del registro encontrado
   - Si no hay folreq, genera n√∫mero aleatorio

3. **C√°lculo de p√°ginas**:
   - Si monto > $5,000: 2 p√°ginas
   - Si monto ‚â§ $5,000: 1 p√°gina

4. **Tipo de documento**:
   - 'P' = Requerimiento Predial
   - 'M' = Requerimiento Multas
   - 'L' = Requerimiento Licencias
   - Otros = Documento de Requerimiento

5. **Procesamiento de monto**:
   - El campo impcuo se divide entre 100
   - Se valida que sea num√©rico
   - Por defecto: 0 si no es v√°lido


--- TABLA USADA ---

Base de datos: multas_reglamentos
Esquema: public
Tabla: req_400
Campo b√∫squeda principal: ctarfc (clave de cuenta)
Campo b√∫squeda alternativo: folreq (folio)
Registros: ~500,000 requerimientos


--- PRUEBAS REALIZADAS ---

‚úì B√∫squeda exitosa por cuenta (000001)
‚úì B√∫squeda exitosa por folio (0037170)
‚úì Validaci√≥n de cuenta inexistente
‚úì Validaci√≥n de campo vac√≠o
‚úì Formato correcto de moneda ($30,254.75)
‚úì Formato correcto de fecha (18 de diciembre de 2025)
‚úì Visualizaci√≥n responsive
‚úì Estados de √©xito y error
‚úì Loading state durante proceso
‚úì C√°lculo correcto de n√∫mero de p√°ginas
‚úì Formato JSON correcto para frontend


--- CAMBIOS EN EL C√ìDIGO ---

**Stored Procedure (update_sp_impresionnva.sql)**:
- Cambiado de retornar datos est√°ticos a buscar en req_400
- Retorna 13 campos completos en lugar de 3
- Validaciones mejoradas
- B√∫squeda flexible (ctarfc o folreq)
- C√°lculos din√°micos (p√°ginas, monto)

**Vue Component (ImpresionNva.vue)**:
- Agregadas secciones detalladas de informaci√≥n
- Grid responsive con auto-fit
- Funciones formatCurrency() y formatDate()
- Badges y estilos mejorados
- Observaciones con fondo destacado
- CSS completo para visualizaci√≥n profesional


--- INTEGRACI√ìN CON EL SISTEMA ---

El componente usa:
- useApi() composable para llamadas API
- BASE_DB: 'multas_reglamentos'
- OP: 'RECAUDADORA_IMPRESIONNVA'
- SCHEMA: 'publico'
- Par√°metro: p_datos (JSON string con clave_cuenta)

Flujo:
1. Usuario ingresa clave de cuenta
2. Frontend valida que no est√© vac√≠o
3. Se env√≠a a trav√©s de useApi con execute()
4. Backend ejecuta SP publico.recaudadora_impresionnva
5. SP busca en req_400 por ctarfc o folreq
6. Retorna JSON con 13 campos
7. Frontend parsea y muestra en secciones organizadas


--- NOTAS T√âCNICAS ---

1. El campo 'tpr' en req_400 parece ser '0' o '1' en lugar de 'P', 'M', 'L'
   - Por eso en los resultados se ve "Documento de Requerimiento"
   - Esto es correcto seg√∫n los datos existentes

2. El campo 'impcuo' requiere divisi√≥n entre 100
   - Esto normaliza los valores almacenados
   - Ejemplo: 3025475 / 100 = $30,254.75

3. Algunos registros pueden tener ctarfc vac√≠o
   - El WHERE valida con LIMIT 1 para evitar m√∫ltiples resultados
   - Usa TRIM para limpiar espacios

4. La fecha siempre es CURRENT_DATE
   - Esto representa la fecha de generaci√≥n de la impresi√≥n
   - No es la fecha del requerimiento original

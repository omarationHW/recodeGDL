=== 3 EJEMPLOS PARA PROBAR ReqPromocion.vue ===

Fecha: 2025-12-18
Componente: RefactorX/FrontEnd/src/views/modules/multas_reglamentos/ReqPromocion.vue
Base de Datos: multas_reglamentos
Stored Procedure: publico.recaudadora_req_promocion(VARCHAR, INTEGER)
Tabla: public.c_descpred (1,289 registros)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROBLEMA ORIGINAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Error: relation "catastro_gdl.descuentos2008" does not exist
La tabla estaba en el esquema incorrecto y no existÃ­a en multas_reglamentos

SOLUCIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

El stored procedure ahora usa la tabla public.c_descpred que existe
en la BD multas_reglamentos con 1,289 tipos de descuentos prediales.

El campo "importe" se mapea al campo "porcentaje" de la tabla:
- importe = porcentaje de descuento
- Ejemplo: importe 50 = 50% de descuento

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FUNCIÃ“N DISPONIBLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**recaudadora_req_promocion**: Retorna catÃ¡logo de descuentos/promociones prediales

PARÃMETROS:
- p_clave_cuenta: VARCHAR (cÃ³digo de descuento)
- p_ejercicio: INTEGER (aÃ±o del ejercicio fiscal)
- Ambos pueden ser NULL

VALIDACIONES:
- Limitado a 100 registros por consulta
- BÃºsqueda flexible con ILIKE (case-insensitive)
- Permite filtrar por cÃ³digo y/o aÃ±o

VALORES RETORNADOS:

| Campo        | Tipo    | DescripciÃ³n                              |
|--------------|---------|------------------------------------------|
| cvedescuento | INTEGER | CÃ³digo del descuento                     |
| descripcion  | TEXT    | DescripciÃ³n del tipo de descuento        |
| importe      | NUMERIC | Porcentaje de descuento (50 = 50%)       |

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EJEMPLO 1: BÃšSQUEDA SIN FILTRO (PRIMEROS 100 REGISTROS)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ OBJETIVO: Ver el catÃ¡logo de descuentos mÃ¡s recientes

ğŸ”§ PASOS PARA PROBAR:

1. Abrir el formulario ReqPromocion.vue en el navegador
2. Dejar los campos de bÃºsqueda VACÃOS:
   - Clave Cuenta: (vacÃ­o)
   - Ejercicio: (vacÃ­o)
3. Click en el botÃ³n "Buscar"

ğŸ“Š RESULTADO ESPERADO:

Total de registros: 100 (limitado automÃ¡ticamente)

Los registros se mostrarÃ¡n ordenados por:
- CÃ³digo de descuento (descendente)

Primeros 5 registros esperados:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CÃ³digo  â”‚ DescripciÃ³n                           â”‚ Porcentaje â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 999999  â”‚ SUBSIDIO POR PRONTO PAGO 2024         â”‚ 10%        â”‚
â”‚ 1363    â”‚ 0.0004572 - NATURACION EXTENSI        â”‚ 30%        â”‚
â”‚ 1362    â”‚ 0.0004318 - NATURACION EXTENSI        â”‚ 30%        â”‚
â”‚ 1361    â”‚ 0.0004064 - NATURACION EXTENSI        â”‚ 30%        â”‚
â”‚ 1360    â”‚ 0.000381 - NATURACION EXTENSIV        â”‚ 30%        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… VALIDACIONES:

- Debe mostrar exactamente 100 registros
- CÃ³digos ordenados descendente (999999, 1363, 1362...)
- PaginaciÃ³n debe mostrar: "Mostrando 1 - 10 de 100 registros"
- Debe mostrar: "PÃ¡gina 1 de 10"
- Porcentajes deben mostrarse como nÃºmeros (10, 30, 50, etc.)
- Descripciones completas y sin espacios extra

ğŸ“ ANÃLISIS DEL RESULTADO:

- CÃ³digos mÃ¡s recientes primero
- Variedad de porcentajes: 10%, 30%, 50%, 100%
- Tipos de descuentos:
  * Subsidio por pronto pago
  * Descuentos por naturalizaciÃ³n
  * Descuentos demogrÃ¡ficos
- AÃ±os desde 1994 hasta 2024

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EJEMPLO 2: BÃšSQUEDA POR CÃ“DIGO ESPECÃFICO (1162)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ OBJETIVO: Consultar detalles de un descuento especÃ­fico

ğŸ”§ PASOS PARA PROBAR:

1. Abrir el formulario ReqPromocion.vue en el navegador
2. En el campo "Clave Cuenta" ingresar: 1162
3. Dejar "Ejercicio" vacÃ­o
4. Click en el botÃ³n "Buscar"

ğŸ“Š RESULTADO ESPERADO:

Total de registros: 1

Detalles del descuento:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Campo            â”‚ Valor                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CÃ³digo           â”‚ 1162                    â”‚
â”‚ DescripciÃ³n      â”‚ VIUDAS (O) 2024         â”‚
â”‚ Porcentaje       â”‚ 50%                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

InformaciÃ³n adicional del catÃ¡logo:
- AÃ±o: 2024
- Aplica cuota fija: SÃ­
- LÃ­mite valor fiscal: $600,000.00
- Tipo de aplicaciÃ³n: Viudas/Viudos

âœ… VALIDACIONES:

- Debe mostrar EXACTAMENTE 1 registro
- CÃ³digo debe ser 1162
- DescripciÃ³n: "VIUDAS (O) 2024"
- Porcentaje: 50%
- PaginaciÃ³n: "Mostrando 1 - 1 de 1 registros"
- PÃ¡gina 1 de 1
- Botones de paginaciÃ³n deshabilitados

ğŸ“ ANÃLISIS DEL RESULTADO:

- Descuento para viudas/viudos
- 50% de descuento en impuesto predial
- Vigente para ejercicio 2024
- Aplica para propiedades con valor fiscal hasta $600,000
- Beneficio social para poblaciÃ³n vulnerable

ğŸ” BÃšSQUEDAS RELACIONADAS:

Puedes probar tambiÃ©n con otros cÃ³digos:
- 1159 â†’ Mayores de 60 aÃ±os 2024 (50%)
- 1161 â†’ Pensionados 2024 (50%)
- 1163 â†’ Discapacitados 2024 (50%)
- 999999 â†’ Subsidio pronto pago 2024 (10%)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EJEMPLO 3: BÃšSQUEDA POR EJERCICIO FISCAL (2024)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ OBJETIVO: Obtener descuentos vigentes para un aÃ±o especÃ­fico

ğŸ”§ PASOS PARA PROBAR:

1. Abrir el formulario ReqPromocion.vue en el navegador
2. Dejar "Clave Cuenta" vacÃ­o
3. En el campo "Ejercicio" ingresar: 2024
4. Click en el botÃ³n "Buscar"

ğŸ“Š RESULTADO ESPERADO:

Total de registros: Variable (depende de cuÃ¡ntos descuentos hay para 2024)

Ejemplo de registros del ejercicio 2024:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CÃ³digo  â”‚ DescripciÃ³n                           â”‚ Porcentaje â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1165    â”‚ MAYORES DE 60 AÃ‘OS 2024               â”‚ 50%        â”‚
â”‚ 1163    â”‚ DISCAPACITADOS 2024                   â”‚ 50%        â”‚
â”‚ 1162    â”‚ VIUDAS (O) 2024                       â”‚ 50%        â”‚
â”‚ 1161    â”‚ PENSIONADOS 2024                      â”‚ 50%        â”‚
â”‚ 1159    â”‚ MAYORES DE 60 AÃ‘OS 2024               â”‚ 50%        â”‚
â”‚ ...     â”‚ ...                                   â”‚ ...        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… VALIDACIONES:

- Debe mostrar solo registros del aÃ±o 2024
- Ordenados por cÃ³digo descendente
- Incluye todos los tipos de descuentos vigentes
- PaginaciÃ³n segÃºn cantidad de registros
- Variedad de porcentajes (10%, 50%, 80%, 100%)

ğŸ“Š ESTADÃSTICAS ESPERADAS (aÃ±o 2024):

DistribuciÃ³n por tipo de descuento:
- Descuentos demogrÃ¡ficos (60+ aÃ±os, pensionados): 50%
- Descuentos sociales (viudas, discapacitados): 50%
- Descuentos institucionales: Variable
- Subsidio pronto pago: 10%

DistribuciÃ³n por porcentaje:
- 10%: Pronto pago
- 50%: Descuentos sociales/demogrÃ¡ficos
- 80%: Instituciones especiales
- 100%: Casos especiales

ğŸ“ ANÃLISIS DEL RESULTADO:

- CatÃ¡logo completo de descuentos vigentes para 2024
- Predominan descuentos del 50% para poblaciÃ³n vulnerable
- Incluye subsidio de pronto pago (10%)
- Descuentos institucionales con porcentajes variables
- PolÃ­tica fiscal actual de beneficios sociales

âš ï¸ NOTA IMPORTANTE:

Los descuentos del mismo porcentaje pueden tener:
- Diferentes lÃ­mites de valor fiscal
- Diferentes condiciones de aplicaciÃ³n
- Diferentes requisitos de edad o documentaciÃ³n

ğŸ” BÃšSQUEDAS RELACIONADAS:

Puedes probar tambiÃ©n con otros aÃ±os:
- 2023 â†’ Descuentos del aÃ±o anterior
- 2022 â†’ Descuentos histÃ³ricos recientes
- 2020 â†’ Descuentos durante pandemia
- 2015 â†’ Descuentos histÃ³ricos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EJEMPLO ADICIONAL: BÃšSQUEDA COMBINADA (CÃ³digo + AÃ±o)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ OBJETIVO: Filtrar con ambos criterios

ğŸ”§ PASOS PARA PROBAR:

1. Abrir el formulario ReqPromocion.vue
2. En "Clave Cuenta" ingresar: 116 (bÃºsqueda parcial)
3. En "Ejercicio" ingresar: 2024
4. Click en el botÃ³n "Buscar"

ğŸ“Š RESULTADO ESPERADO:

- Todos los descuentos del 2024 con cÃ³digo que contenga "116"
- Ejemplo: 1161, 1162, 1163, 1165
- BÃºsqueda mÃ¡s especÃ­fica y refinada

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RESUMEN DE CASOS DE USO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ejemplo           â•‘ Clave        â•‘ Ejercicio    â•‘ Caso de Uso        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ 1. Sin filtro     â•‘ (vacÃ­o)      â•‘ (vacÃ­o)      â•‘ CatÃ¡logo completo  â•‘
â•‘ 2. Por cÃ³digo     â•‘ 1162         â•‘ (vacÃ­o)      â•‘ Descuento especÃ­f. â•‘
â•‘ 3. Por aÃ±o        â•‘ (vacÃ­o)      â•‘ 2024         â•‘ Vigentes aÃ±o       â•‘
â•‘ Adicional         â•‘ 116          â•‘ 2024         â•‘ BÃºsqueda combinada â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ESTADÃSTICAS DISPONIBLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**Datos generales de la tabla:**
- Total de registros: 1,289 tipos de descuentos
- AÃ±os disponibles: 31 (1994 - 2024)
- Porcentaje promedio: 52.98%
- Porcentaje mÃ­nimo: 0%
- Porcentaje mÃ¡ximo: 100%

**DistribuciÃ³n por porcentaje:**
- 50%: 592 descuentos (45.9%) â† MÃ¡s comÃºn
- 80%: 167 descuentos (13.0%)
- 60%: 154 descuentos (11.9%)
- 10%: 136 descuentos (10.5%)
- 100%: 96 descuentos (7.4%)
- Otros: Resto distribuido

**Tipos de descuentos principales:**
1. DemogrÃ¡ficos (60+ aÃ±os, pensionados)
2. Sociales (viudas, discapacitados)
3. Institucionales (asistencia social)
4. Pronto pago (subsidios)
5. Especiales (diversos criterios)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CARACTERÃSTICAS DE LOS DATOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ **1,289 tipos de descuentos disponibles**
  - CatÃ¡logo de descuentos prediales
  - BÃºsqueda por cÃ³digo o aÃ±o
  - HistÃ³rico desde 1994

âœ“ **Campos completos**
  - CÃ³digo Ãºnico de descuento
  - DescripciÃ³n clara del beneficio
  - Porcentaje de descuento
  - AÃ±o de vigencia
  - LÃ­mites de valor fiscal

âœ“ **BÃºsqueda flexible**
  - Por cÃ³digo completo o parcial
  - Por ejercicio fiscal
  - CombinaciÃ³n de ambos criterios
  - Sin parÃ¡metros: catÃ¡logo completo

âœ“ **Ordenamiento inteligente**
  - Por cÃ³digo descendente
  - Descuentos mÃ¡s recientes primero

âœ“ **LÃ­mite de resultados**
  - MÃ¡ximo 100 registros por consulta
  - Evita sobrecarga del sistema
  - BÃºsquedas mÃ¡s especÃ­ficas recomendadas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NOTAS IMPORTANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ **Tabla base real**
   La tabla public.c_descpred es el catÃ¡logo oficial de descuentos
   prediales del sistema de recaudaciÃ³n.

âš ï¸ **Esquema corregido**
   Se cambiÃ³ de catastro_gdl.descuentos2008 a public.c_descpred
   que es la tabla correcta en la BD multas_reglamentos.

âš ï¸ **Campo "importe"**
   El campo "importe" retornado es en realidad el campo "porcentaje"
   de la tabla c_descpred. Representa el porcentaje de descuento:
   - 50 = 50% de descuento
   - 100 = 100% de descuento (exenciÃ³n total)

âš ï¸ **LÃ­mite de 100 registros**
   Solo retorna mÃ¡ximo 100 registros por consulta.
   Para ver mÃ¡s, hacer bÃºsquedas mÃ¡s especÃ­ficas por aÃ±o.

âš ï¸ **ParÃ¡metro p_ejercicio**
   El segundo parÃ¡metro (ejercicio) es INTEGER y opcional.
   Permite filtrar descuentos por aÃ±o fiscal especÃ­fico.

âš ï¸ **BÃºsqueda ILIKE**
   La bÃºsqueda por cÃ³digo usa ILIKE (case-insensitive)
   Permite bÃºsquedas parciales: "116" encuentra 1161, 1162, 1163...

âš ï¸ **Descuentos vigentes**
   No todos los descuentos estÃ¡n activos. El aÃ±o del ejercicio
   (axodescto) indica para quÃ© aÃ±o fue creado el descuento.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

COMPORTAMIENTO ESPERADO EN VUE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

```javascript
// Ejemplo de llamada desde Vue (bÃºsqueda por cÃ³digo)
const params = [
  { nombre: 'p_clave_cuenta', tipo: 'string', valor: '1162' },
  { nombre: 'p_ejercicio', tipo: 'integer', valor: null }
];

// Respuesta esperada
{
  "data": [
    {
      "cvedescuento": 1162,
      "descripcion": "VIUDAS (O) 2024",
      "importe": 50
    }
  ],
  "total": 1
}

// Respuesta esperada (bÃºsqueda sin filtro)
{
  "data": [
    // ... 100 registros
  ],
  "total": 100
}
```

El componente ReqPromocion.vue deberÃ­a:
1. Recibir el array de descuentos
2. Mostrar tabla con columnas: CÃ³digo, DescripciÃ³n, Porcentaje
3. Campos de bÃºsqueda para:
   - CÃ³digo de descuento (text input)
   - Ejercicio fiscal (number input)
4. Formateo especial:
   - Porcentaje con sÃ­mbolo % (50%)
   - Descripciones limpias sin espacios extra
5. PaginaciÃ³n implementada
6. LÃ­mite de 100 resultados por bÃºsqueda
7. BÃºsqueda sin filtros muestra primeros 100
8. Ordenar por cÃ³digo descendente

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RESUMEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Problema: Tabla catastro_gdl.descuentos2008 no existÃ­a

SoluciÃ³n: Stored procedure actualizado para usar public.c_descpred

CaracterÃ­sticas:
- 1,289 tipos de descuentos disponibles (1994-2024)
- BÃºsqueda por cÃ³digo o ejercicio fiscal
- Tabla correcta en esquema public
- LÃ­mite de 100 registros por consulta
- Ordenamiento por cÃ³digo descendente
- Porcentajes: 0% a 100%, promedio 53%
- Campo "importe" mapea a "porcentaje"

Resultado:
- Consulta de catÃ¡logo de descuentos
- InformaciÃ³n de tipos de beneficios fiscales
- Porcentajes de descuento aplicables
- Vigencia por ejercicio fiscal
- Datos oficiales del sistema

Ventajas:
- CatÃ¡logo oficial de descuentos
- BÃºsqueda flexible por mÃºltiples criterios
- Consulta rÃ¡pida de beneficios disponibles
- InformaciÃ³n completa de cada descuento
- LÃ­mite de resultados para rendimiento
- HistÃ³rico desde 1994

Uso recomendado:
- BÃºsquedas por cÃ³digo especÃ­fico para ver detalles
- Consulta por aÃ±o para descuentos vigentes
- BÃºsqueda sin filtros para navegaciÃ³n general
- VerificaciÃ³n de porcentajes y condiciones
- Consulta de descuentos disponibles por ejercicio
- AnÃ¡lisis de polÃ­ticas fiscales por aÃ±o

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Fin del documento - Generado el 2025-12-18
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
